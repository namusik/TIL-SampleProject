# efs-csi-driver

## 개념

### Controller

- efs-csi-controller
- Deployment로 배포됨.
- 클러스터 전체에서 두뇌 역할
- 새로운 EFS 볼륨을 만들고(Provisioning), 연결하고, 삭제하는 등의 관리 작업을 총괄
  - 누군가 "EFS 볼륨 하나 만들어주세요"라고 요청(PVC 생성)하면 이 컨트롤러가 처리
- 2개 생성됨
  - 2개의 컨트롤러 Pod를 서로 다른 노드에 띄워두면, 하나에 문제가 생겨도 나머지 하나가 즉시 그 역할을 이어받아 작업을 처리할 수 있음.
- 클러스터 내의 아무 노드에나 분산되어 실행
- (둘 다 죽으면) **새로운 볼륨 생성 불가**

### Node Plugin

- efs-csi-node
- DaemonSet으로 배포됨
- 각 노드에서 손과 발 역할
- 각 노드에서 실제 볼륨을 마운트/언마운트하는 실무 작업
- 클러스터의 노드 개수만큼 (각 노드에 1개씩) 생성됨
- (하나가 죽으면) **해당 노드에서** 새로운 볼륨 마운트 불가